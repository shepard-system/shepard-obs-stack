# configs/prometheus/alerts/pipeline.yaml â€” Shepherd pipeline alerts
#
# Infra-level alerts (OTelCollectorDown, CollectorHighMemory) live in infra.yaml.
# This file covers pipeline/ingest/scrape chain only.
groups:
  - name: shepherd-pipeline
    rules:
      - alert: LokiDown
        expr: up{job="shepherd-services"} == 0
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "Loki exporter endpoint is down"
          description: "The Loki metrics endpoint exposed via OTel Collector is unreachable."

      - alert: PrometheusTargetDown
        expr: up == 0
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Scrape target {{ $labels.job }} is down"
          description: "Prometheus cannot scrape {{ $labels.instance }} for job {{ $labels.job }}."
